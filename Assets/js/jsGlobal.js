import{divLoading}from"./functionsGlobals.js";const tableAplicacionVacantes=document.querySelector("#lista-vacantes");document.addEventListener("DOMContentLoaded",()=>{tableAplicacionVacantes&&applyVacant(),(document.querySelector("#link-cv")||document.querySelector("#hoja-vida"))&&getDataAspirante(),(document.getElementById("cv-1")||document.getElementById("cv-2"))&&changeTemplateCv(),document.querySelector("#generar-pdf")&&document.querySelector("#generar-pdf").addEventListener("click",()=>{generarPdf()})});const btnSwitch=document.getElementById("switch");btnSwitch&&(btnSwitch.addEventListener("click",()=>{document.body.classList.toggle("dark"),btnSwitch.classList.toggle("active"),document.body.classList.contains("dark")?localStorage.setItem("dark-mode","true"):localStorage.setItem("dark-mode","false")}),"true"===localStorage.getItem("dark-mode")?(document.body.classList.add("dark"),btnSwitch.classList.add("active")):(document.body.classList.remove("dark"),btnSwitch.classList.remove("active")));const addClass=(e,t)=>{e.classList.add(t)},removeClass=(e,...t)=>{t.forEach(t=>e.classList.remove(t))};if(document.querySelector("#change-bg-cv")){if(document.getElementById("cv-1").classList.contains("active")){const e=document.querySelector("#template-1 .resume-header"),t=document.querySelectorAll(".template-1 .resume-section-title"),a=document.querySelectorAll(".template-1 .icon"),s=document.querySelectorAll(".template-1 .progress-bar");document.getElementById("btn-change-bg-primary").addEventListener("click",()=>{addClass(e,"bg-primary"),removeClass(e,"bg-secondary"),removeClass(e,"bg-success"),removeClass(e,"bg-danger"),removeClass(e,"bg-warning"),removeClass(e,"bg-info"),removeClass(e,"bg-dark"),t.forEach(e=>{addClass(e,"text-primary"),removeClass(e,"text-secondary","text-success","text-danger","text-warning","text-info","text-dark")}),a.forEach(e=>{addClass(e,"text-primary"),removeClass(e,"text-secondary","text-success","text-danger","text-warning","text-info","text-dark")}),s.forEach(e=>{addClass(e,"bg-primary"),removeClass(e,"text-secondary","text-success","text-danger","text-warning","text-info","text-dark")})}),document.getElementById("btn-change-bg-secondary").addEventListener("click",()=>{addClass(e,"bg-secondary"),removeClass(e,"bg-primary","bg-success","bg-danger","bg-warning","bg-info","bg-dark"),t.forEach(e=>{addClass(e,"text-secondary"),removeClass(e,"text-primary","text-success","text-danger","text-warning","text-info","text-dark")}),a.forEach(e=>{addClass(e,"text-secondary"),removeClass(e,"text-primary","text-success","text-danger","text-warning","text-info","text-dark")}),s.forEach(e=>{addClass(e,"bg-secondary"),removeClass(e,"text-primary","text-success","text-danger","text-warning","text-info","text-dark")})}),document.getElementById("btn-change-bg-success").addEventListener("click",()=>{addClass(e,"bg-success"),removeClass(e,"bg-primary","bg-secondary","bg-danger","bg-warning","bg-info","bg-dark"),t.forEach(e=>{addClass(e,"text-success"),removeClass(e,"text-primary","text-secondary","text-danger","text-warning","text-info","text-dark")}),a.forEach(e=>{addClass(e,"text-success"),removeClass(e,"text-primary","text-secondary","text-danger","text-warning","text-info","text-dark")}),s.forEach(e=>{addClass(e,"bg-success"),removeClass(e,"text-primary","text-secondary","text-danger","text-warning","text-info","text-dark")})}),document.getElementById("btn-change-bg-warning").addEventListener("click",()=>{addClass(e,"bg-warning"),removeClass(e,"bg-primary","bg-secondary","bg-danger","bg-success","bg-info","bg-dark"),t.forEach(e=>{addClass(e,"text-warning"),removeClass(e,"text-primary","text-secondary","text-danger","text-success","text-info","text-dark")}),a.forEach(e=>{addClass(e,"text-warning"),removeClass(e,"text-primary","text-secondary","text-danger","text-success","text-info","text-dark")}),s.forEach(e=>{addClass(e,"bg-warning"),removeClass(e,"text-primary","text-secondary","text-danger","text-success","text-info","text-dark")})}),document.getElementById("btn-change-bg-info").addEventListener("click",()=>{addClass(e,"bg-info"),removeClass(e,"bg-primary","bg-secondary","bg-danger","bg-success","bg-warning","bg-dark"),t.forEach(e=>{addClass(e,"text-info"),removeClass(e,"text-primary","text-secondary","text-danger","text-success","text-warning","text-dark")}),a.forEach(e=>{addClass(e,"text-info"),removeClass(e,"text-primary","text-secondary","text-danger","text-success","text-warning","text-dark")}),s.forEach(e=>{addClass(e,"bg-info"),removeClass(e,"text-primary","text-secondary","text-danger","text-success","text-warning","text-dark")})}),document.getElementById("btn-change-bg-dark").addEventListener("click",()=>{addClass(e,"bg-dark"),removeClass(e,"bg-primary","bg-secondary","bg-danger","bg-success","bg-warning","bg-info"),t.forEach(e=>{addClass(e,"text-dark"),removeClass(e,"text-primary","text-secondary","text-danger","text-success","text-warning","text-info")}),a.forEach(e=>{addClass(e,"text-dark"),removeClass(e,"text-primary","text-secondary","text-danger","text-success","text-warning","text-info")}),s.forEach(e=>{addClass(e,"bg-dark"),removeClass(e,"text-primary","text-secondary","text-danger","text-success","text-warning","text-info")})})}if("none"!==document.getElementById("cv-2").style.display){const e=document.querySelector("#template-2 .resume-name"),t=document.querySelectorAll("#template-2 .resume-section-heading"),a=document.querySelectorAll("#template-2 .icon");document.getElementById("btn-change-bg-primary").addEventListener("click",()=>{addClass(e,"text-primary"),removeClass(e,"text-secondary","text-success","text-danger","text-warning","text-info","text-dark"),t.forEach(e=>{addClass(e,"text-primary"),removeClass(e,"text-secondary","text-success","text-danger","text-warning","text-info","text-dark")}),a.forEach(e=>{addClass(e,"text-primary"),removeClass(e,"text-secondary","text-success","text-danger","text-warning","text-info","text-dark")})}),document.getElementById("btn-change-bg-secondary").addEventListener("click",()=>{addClass(e,"text-secondary"),removeClass(e,"text-primary","text-success","text-danger","text-warning","text-info","text-dark"),t.forEach(e=>{addClass(e,"text-secondary"),removeClass(e,"text-primary","text-success","text-danger","text-warning","text-info","text-dark")}),a.forEach(e=>{addClass(e,"text-secondary"),removeClass(e,"text-primary","text-success","text-danger","text-warning","text-info","text-dark")})}),document.getElementById("btn-change-bg-success").addEventListener("click",()=>{addClass(e,"text-success"),removeClass(e,"text-primary","text-secondary","text-danger","text-warning","text-info","text-dark"),t.forEach(e=>{addClass(e,"text-success"),removeClass(e,"text-primary","text-secondary","text-danger","text-warning","text-info","text-dark")}),a.forEach(e=>{addClass(e,"text-success"),removeClass(e,"text-primary","text-secondary","text-danger","text-warning","text-info","text-dark")})}),document.getElementById("btn-change-bg-warning").addEventListener("click",()=>{addClass(e,"text-warning"),removeClass(e,"text-primary","text-secondary","text-danger","text-success","text-info","text-dark"),t.forEach(e=>{addClass(e,"text-warning"),removeClass(e,"text-primary","text-secondary","text-danger","text-success","text-info","text-dark")}),a.forEach(e=>{addClass(e,"text-warning"),removeClass(e,"text-primary","text-secondary","text-danger","text-success","text-info","text-dark")})}),document.getElementById("btn-change-bg-info").addEventListener("click",()=>{addClass(e,"text-info"),removeClass(e,"text-primary","text-secondary","text-danger","text-success","text-warning","text-dark"),t.forEach(e=>{addClass(e,"text-info"),removeClass(e,"text-primary","text-secondary","text-danger","text-success","text-warning","text-dark")}),a.forEach(e=>{addClass(e,"text-info"),removeClass(e,"text-primary","text-secondary","text-danger","text-success","text-warning","text-dark")})}),document.getElementById("btn-change-bg-dark").addEventListener("click",()=>{addClass(e,"text-dark"),removeClass(e,"text-primary","text-secondary","text-danger","text-success","text-warning","text-info"),t.forEach(e=>{addClass(e,"text-dark"),removeClass(e,"text-primary","text-secondary","text-danger","text-success","text-warning","text-info")}),a.forEach(e=>{addClass(e,"text-dark"),removeClass(e,"text-primary","text-secondary","text-danger","text-success","text-warning","text-info")})})}}const changeTemplateCv=()=>{document.getElementById("cv-1").addEventListener("click",()=>{document.getElementById("css-cv").setAttribute("href",`${base_url}Assets/css/cv/styleCv-1.css`),document.getElementById("cv-1").classList.add("active"),document.getElementById("cv-2").classList.remove("active")}),document.getElementById("cv-2").addEventListener("click",()=>{document.getElementById("css-cv").setAttribute("href",`${base_url}Assets/css/cv/styleCv-2.css`),document.getElementById("cv-2").classList.add("active"),document.getElementById("cv-1").classList.remove("active")})},generarPdf=()=>{let e;document.getElementById("cv-1").classList.contains("active")&&(e=document.getElementById("template-1")),document.getElementById("cv-2").classList.contains("active")&&(e=document.getElementById("template-2"));const t=document.querySelector("#generar-pdf").dataset.user;html2pdf().set({margin:[.5,0,1,0],filename:`${t}.pdf`,image:{type:"jpeg",quiality:.98},html2canvas:{scale:2,letterRendering:!0},jsPDF:{unit:"in",format:"A4",orientation:"Portrait"}}).from(e).save().catch(e=>console.log(e))};export const getDataAspirante=async()=>{const e=`${base_url}Aspirante/getDataAspirante`;try{const t=await fetch(e),{status:a,data:s}=await t.json();a||"no"!==s?(document.querySelector("#hoja-vida")&&(document.querySelector("#hoja-vida").removeAttribute("disabled"),document.querySelector("#link-hoja-vida").setAttribute("href",`${base_url}Aspirante/HojaVida`)),document.querySelector("#list-cv")&&(document.querySelector("#list-cv").removeAttribute("disabled"),document.querySelector("#link-cv").setAttribute("href",`${base_url}Aspirante/HojaVida`))):(document.querySelector("#hoja-vida")&&(document.querySelector("#hoja-vida").setAttribute("disabled","disabled"),document.querySelector("#link-hoja-vida").setAttribute("href","#")),document.querySelector("#list-cv")&&(document.querySelector("#list-cv").setAttribute("disabled","disabled"),document.querySelector("#link-cv").setAttribute("href","#")))}catch(e){console.error(e)}};const applyVacant=async()=>{const e=`${base_url}Vacante/getApplyVacancys`;try{divLoading.style.display="flex";const t=await fetch(e),{status:a,data:s}=await t.json();a&&s.length>0?(tableAplicacionVacantes.innerHTML="",s.forEach(e=>{tableAplicacionVacantes.innerHTML+=`\n        <tr>\n          <td>${e.idAplicacionVacante}</td>\n          <td>${e.nombreVacante}</td>\n          <td>${e.nombreUsuario}</td>\n          <td>${e.estadoAplicacionVacante}</td>\n        </tr>\n        `})):tableAplicacionVacantes.innerHTML=`<tr>\n            <td colspan="5" class="text-center">\n                <h6>No ha aplicado a ninguna vacante puede aplicar <a href="${base_url}Vacante/ListaEmpleos" class="link-info">aquí.</a></h6>\n            </td>\n        </tr>`,divLoading.style.display="none"}catch(e){console.error(e)}};